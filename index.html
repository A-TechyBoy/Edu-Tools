<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ATB's Edu Tools</title>
		<style>
			@import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300&family=Walter+Turncoat&display=swap");
			@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap');

			html,
			body {
				margin: 0;
				padding: 0;
				height: 100vh;
				overflow: hidden;
			}

			body {
				padding: 10px; /* Reduced padding */
				background-color: #101010;
				color: aliceblue;
				font-family: "Space Grotesk", serif;
				font-optical-sizing: auto;
				font-weight: 400;
				font-style: normal;
				display: flex;
				flex-direction: column;
				overflow: hidden;
			}

			.BodyTimeMode {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				flex: 1;
			}

			.BodyTimeMode h1 {
				font-size: 16rem;
				margin: 0;
			}

			.BodyTimeMode h2 {
				font-size: 5rem;
				margin: 0;
			}

			#navBar {
				display: flex;
				align-items: center;
				margin-bottom: 10px;
			}

			#root {
				flex: 1;
				margin-bottom: 10px; /* Add margin to prevent cutoff */
			}

			hr {
				margin: 10px 0;
			}

			#navBar {
				display: flex;
				align-items: center;
			}
			select {
				background-color: #101010;
				color: aliceblue;
				font-family: "Walter Turncoat", serif;
				font-size: 20px;
				border: 4px solid rgb(255, 176, 131);
				border-radius: 20px;
				padding: 5px;
			}

			select:focus {
				outline: none;
			}

			.canvas-container {
				position: relative;
				width: 100%;
				height: 100%;
			}
			#drawingCanvas {
				border: 1px solid #333;
				background: white;
			}
			.tools {
				position: absolute;
				top: 10px;
				left: 10px;
				background: rgba(0, 0, 0, 0.7);
				padding: 10px;
				border-radius: 5px;
			}
			.color-picker {
				width: 50px;
			}
			.tools button {
				background: #333;
				color: white;
				border: none;
				padding: 5px 10px;
				border-radius: 3px;
				margin: 0 5px;
				cursor: pointer;
			}
			.tools button.active {
				background: rgb(255, 176, 131);
				color: black;
			}

			/* Add calculator container style */
			#calculator {
				width: 100%;
				height: 100%;
				min-height: 400px;
			}

			.info-icon {
				margin-left: auto;
				font-size: 24px;
				cursor: pointer;
				color: rgb(255, 176, 131);
				padding: 10px;
			}

			.tooltip {
				position: relative;
				display: inline-block;
			}

			.tooltip .tooltiptext {
				visibility: hidden;
				width: 200px;
				background-color: #333;
				color: #fff;
				text-align: center;
				border-radius: 6px;
				padding: 5px;
				position: absolute;
				z-index: 1;
				right: 0;
				top: 100%;
			}

			.tooltip:hover .tooltiptext {
				visibility: visible;
			}

			.timer-controls {
				display: flex;
				gap: 10px;
				margin-top: 20px;
			}

			.timer-controls button {
				background: rgb(255, 176, 131);
				border: none;
				padding: 10px 20px;
				border-radius: 5px;
				cursor: pointer;
				font-family: "Space Grotesk", serif;
				transition: background-color 0.3s, opacity 0.3s;
			}

			.timer-controls button:disabled {
				background: #666;
				cursor: not-allowed;
				opacity: 0.7;
			}

			.timer-controls button.active {
				background: #666;
			}

			.countdown-input {
				margin-top: 20px;
				font-size: 1.5rem;
				display: flex;
				gap: 10px;
				align-items: center;
			}

			.countdown-input input {
				background: #222;
				border: 2px solid rgb(255, 176, 131);
				color: white;
				padding: 8px;
				border-radius: 5px;
				font-family: 'Space Grotesk', serif;
			}

			.timer-display {
				font-family: 'Roboto Mono', monospace;
			}

			.progress-bar {
				width: 100%;
				height: 4px;
				background: #333;
				position: fixed;
				top: 0;
				left: 0;
			}

			.progress-bar-fill {
				height: 100%;
				background: rgb(255, 176, 131);
				width: 0%;
				transition: width 0.5s;
			}

			.github-icon {
				margin-left: 10px;
				font-size: 24px;
				cursor: pointer;
				color: rgb(255, 176, 131);
				padding: 10px;
			}
		</style>
		<script src="https://www.desmos.com/api/v1.10/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://www.desmos.com/api/v1.10/3d.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://www.desmos.com/api/v1.10/scientific.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://www.desmos.com/api/v1.10/fourfunction.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://unpkg.com/easydraw-package/dist/easydraw.browser.js"></script>
	</head>
	<body>
		<div id="navBar">
			<select onchange="NewTool();" id="WhatToolDoYouWantToUse">
				<option>White Bord</option>
				<option>Timer Tools</option>
				<option>Calculator</option>
				<option>Visualizer</option>
			</select>

			<p>&nbsp;&nbsp; &nbsp;&nbsp;</p>
			<div id="options"></div>
			<div class="tooltip info-icon">
					ℹ
					<span class="tooltiptext"
						>Created by ATB for educational purposes. A collection of
						useful tools for students and teachers.</span
					>
			</div>
			<a href="https://github.com/yourusername/repo" target="_blank" class="tooltip github-icon">
				⊐
				<span class="tooltiptext">Collaborate on GitHub!</span>
			</a>
		</div>
		<hr />
		<div class="progress-bar"><div class="progress-bar-fill"></div></div>
		<div id="root"></div>
		<script>
			var whattool = document.getElementById("WhatToolDoYouWantToUse");
			var options = document.getElementById("options");
			var root = document.getElementById("root");
			var ModeCurrunt;
			const backgrounds = {
				Blank: "",
				"World Map":
					"https://cloud-j5gnh7ftf-hack-club-bot.vercel.app/0image.png",
				"Political Map Of India":
					"https://cloud-nvulyyvhh-hack-club-bot.vercel.app/0image.png",
				"Outline Map Of India":
					"https://cloud-f745p5pob-hack-club-bot.vercel.app/0image.png",
			};

			let stopwatchInterval;
			let stopwatchTime = 0;
			let countdownInterval;

			function formatTime(ms) {
				const hrs = Math.floor(ms / 3600000);
				const mins = Math.floor((ms % 3600000) / 60000);
				const secs = Math.floor((ms % 60000) / 1000);
				return `${hrs.toString().padStart(2, "0")}:${mins
					.toString()
					.padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
			}

			function UpdateDateANdTime() {
				var date = new Date();
				root.innerHTML = `
					<h2>${date.toDateString()}<h2>
					<h1>${date.toLocaleTimeString()}</h1>
				`;
			}

			function updateGraphType() {
				const graphType = document.getElementById("graphOptions").value;
				root.innerHTML = '<div id="calculator"></div>';
				const elt = document.getElementById("calculator");

				switch (graphType) {
					case "2D Graph":
						return Desmos.GraphingCalculator(elt);
					case "3D Graph":
						return Desmos.Calculator3D(elt);
					case "Scientific":
						return Desmos.ScientificCalculator(elt);
					case "Four Function":
						return Desmos.FourFunctionCalculator(elt);
				}
			}

			function updateTimeOptions() {
				root.className = "BodyTimeMode";
				options.innerHTML = `
					<select onchange="switchTimeMode(this.value);" id="timeOptions">
						<option>Clock</option>
						<option>Stopwatch</option>
						<option>Countdown</option>
					</select>
				`;
				switchTimeMode("Clock");
			}

			function switchTimeMode(mode) {
				clearInterval(ModeCurrunt);
				clearInterval(stopwatchInterval);
				clearInterval(countdownInterval);

				switch (mode) {
					case "Clock":
						root.className = "BodyTimeMode";
						UpdateDateANdTime();
						ModeCurrunt = setInterval(UpdateDateANdTime, 1000);
						break;
					case "Stopwatch":
						stopwatchTime = 0;
						root.className = "BodyTimeMode";
						root.innerHTML = `
							<h1>00:00:00</h1>
							<div class="timer-controls">
								<button onclick="startStopwatch()" id="startBtn">Start</button>
								<button onclick="stopStopwatch()" id="stopBtn" disabled>Stop</button>
								<button onclick="resetStopwatch()" id="resetBtn">Reset</button>
							</div>
						`;
						break;
					case "Countdown":
						root.className = "BodyTimeMode";
						root.innerHTML = `
							<div class="timer-display">
								<h1>00:00:00</h1>
								<div class="countdown-input">
									<input type="number" id="countdownMinutes" placeholder="Minutes" min="1">
									<button onclick="startCountdown()">Start</button>
								</div>
							</div>
						`;
						break;
				}
			}

			// Stopwatch functions
			function startStopwatch() {
				if (!stopwatchInterval) {
					const startTime = Date.now() - stopwatchTime;
					stopwatchInterval = setInterval(() => {
						stopwatchTime = Date.now() - startTime;
						root.querySelector("h1").textContent =
							formatTime(stopwatchTime);
					}, 10); // Update more frequently for smoother display

					document.getElementById("startBtn").disabled = true;
					document.getElementById("stopBtn").disabled = false;
					document.getElementById("resetBtn").disabled = true;
				}
			}

			function stopStopwatch() {
				clearInterval(stopwatchInterval);
				stopwatchInterval = null;
				document.getElementById("startBtn").disabled = false;
				document.getElementById("stopBtn").disabled = true;
				document.getElementById("resetBtn").disabled = false;
			}

			function resetStopwatch() {
				stopStopwatch();
				stopwatchTime = 0;
				root.querySelector("h1").textContent = "00:00:00";
				document.getElementById("startBtn").disabled = false;
				document.getElementById("stopBtn").disabled = true;
				document.getElementById("resetBtn").disabled = false;
			}

			// Countdown functions
			function startCountdown() {
				const minutes = parseInt(document.getElementById("countdownMinutes").value);
				if (!minutes || minutes <= 0) {
					root.querySelector("h1").textContent = "00:00:00";
					return;
				}

				const targetDate = Date.now() + (minutes * 60000);
				const totalTime = minutes * 60000;

				function updateCountdown() {
					const now = Date.now();
					const distance = targetDate - now;

					if (distance < 0) {
						stopCountdown();
						root.querySelector("h1").textContent = "TIME UP";
						document.querySelector(".progress-bar-fill").style.width = "0%";
						return;
					}

					const timeLeft = formatTime(distance);
					root.querySelector("h1").textContent = timeLeft;

					// Update progress bar
					const percentage = ((totalTime - distance) / totalTime) * 100;
					document.querySelector(".progress-bar-fill").style.width = `${percentage}%`;
				}

				updateCountdown();
				countdownInterval = setInterval(updateCountdown, 1000);
			}

			function stopCountdown() {
				clearInterval(countdownInterval);
			}

			function NewTool() {
				clearInterval(ModeCurrunt);
				clearInterval(stopwatchInterval);
				clearInterval(countdownInterval);

				switch (whattool.value) {
					case "White Bord":
						options.innerHTML = `
						Background:
							<select onchange="displayCanvas('#root', backgrounds[document.getElementById('WhiteBordOptions').value]);" id="WhiteBordOptions">
								<option>Blank</option>
								<option>Political Map Of India</option>
								<option>Outline Map Of India</option>
								<option>World Map</option>
							</select>
						`;
						displayCanvas(
							"#root",
							backgrounds[
								document.getElementById("WhiteBordOptions")
									.value
							]
						);
						break;

					case "Timer Tools":
						updateTimeOptions();
						break;

					case "Calculator":
						options.innerHTML = `
						<select onchange="updateCalculator();" id="calcOptions">
							<option>Scientific</option>
							<option>Four Function</option>
						</select>
					`;
						updateCalculator();
						break;

					case "Visualizer":
						options.innerHTML = `
							<select onchange="updateGraphType();" id="graphOptions">
								<option>2D Graph</option>
								<option>3D Graph</option>
							</select>
						`;
						updateGraphType();
						break;
				}
			}

			function updateCalculator() {
				root.innerHTML = '<div id="calculator"></div>';
				const elt = document.getElementById("calculator");
				const type = document.getElementById("calcOptions").value;

				if (type === "Scientific") {
					return Desmos.ScientificCalculator(elt);
				} else {
					return Desmos.FourFunctionCalculator(elt);
				}
			}

			NewTool();
		</script>
	</body>
</html>
