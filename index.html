<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ATB's Edu Tools</title>
		<style>
			@import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300&family=Walter+Turncoat&display=swap");
			@import url("https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap");

			html,
			body {
				margin: 0;
				padding: 0;
				height: 100vh;
				overflow: hidden;
			}

			body {
				padding: 10px; /* Reduced padding */
				background-color: #101010;
				color: aliceblue;
				font-family: "Space Grotesk", serif;
				font-optical-sizing: auto;
				font-weight: 400;
				font-style: normal;
				display: flex;
				flex-direction: column;
				overflow: hidden;
			}

			.BodyTimeMode {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				flex: 1;
			}

			.BodyTimeMode h1 {
				font-size: 16rem;
				margin: 0;
			}

			.BodyTimeMode h2 {
				font-size: 5rem;
				margin: 0;
			}

			#navBar {
				display: flex;
				align-items: center;
				margin-bottom: 10px;
			}

			#root {
				flex: 1;
				margin-bottom: 10px; /* Add margin to prevent cutoff */
			}

			hr {
				margin: 10px 0;
			}

			#navBar {
				display: flex;
				align-items: center;
			}
			select {
				background-color: #101010;
				color: aliceblue;
				font-family: "Walter Turncoat", serif;
				font-size: 20px;
				border: 4px solid rgb(255, 176, 131);
				border-radius: 20px;
				padding: 5px;
			}

			select:focus {
				outline: none;
			}

			.canvas-container {
				position: relative;
				width: 100%;
				height: 100%;
			}
			#drawingCanvas {
				border: 1px solid #333;
				background: white;
			}
			.tools {
				position: absolute;
				top: 10px;
				left: 10px;
				background: rgba(0, 0, 0, 0.7);
				padding: 10px;
				border-radius: 5px;
			}
			.color-picker {
				width: 50px;
			}
			.tools button {
				background: #333;
				color: white;
				border: none;
				padding: 5px 10px;
				border-radius: 3px;
				margin: 0 5px;
				cursor: pointer;
			}
			.tools button.active {
				background: rgb(255, 176, 131);
				color: black;
			}

			/* Add calculator container style */
			#calculator {
				width: 100%;
				height: 100%;
				min-height: 400px;
			}

			.info-icon {
				margin-left: auto;
				font-size: 24px;
				cursor: pointer;
				color: rgb(255, 176, 131);
				padding: 10px;
			}

			.tooltip {
				position: relative;
				display: inline-block;
			}

			.tooltip .tooltiptext {
				visibility: hidden;
				width: 200px;
				background-color: #333;
				color: #fff;
				text-align: center;
				border-radius: 6px;
				padding: 5px;
				position: absolute;
				z-index: 1;
				right: 0;
				top: 100%;
			}

			.tooltip:hover .tooltiptext {
				visibility: visible;
			}

			.timer-controls {
				display: flex;
				gap: 10px;
				margin-top: 20px;
			}

			.timer-controls button {
				background: rgb(255, 176, 131);
				border: none;
				padding: 10px 20px;
				border-radius: 5px;
				cursor: pointer;
				font-family: "Space Grotesk", serif;
				transition: background-color 0.3s, opacity 0.3s;
			}

			.timer-controls button:disabled {
				background: #666;
				cursor: not-allowed;
				opacity: 0.7;
			}

			.timer-controls button.active {
				background: #666;
			}

			.countdown-input {
				margin-top: 20px;
				font-size: 1.5rem;
				display: flex;
				gap: 10px;
				align-items: center;
			}

			.countdown-input input {
				background: #222;
				border: 2px solid rgb(255, 176, 131);
				color: white;
				padding: 8px;
				border-radius: 5px;
				font-family: "Space Grotesk", serif;
			}

			.timer-display {
				font-family: "Roboto Mono", monospace;
			}

			.progress-bar {
				width: 100%;
				height: 4px;
				background: #333;
				position: fixed;
				top: 0;
				left: 0;
			}

			.progress-bar-fill {
				height: 100%;
				background: rgb(255, 176, 131);
				width: 0%;
				transition: width 0.5s;
			}

			.github-icon {
				margin-left: 10px;
				font-size: 24px;
				cursor: pointer;
				color: rgb(255, 176, 131);
				padding: 10px;
			}

			.time-display {
				font-family: 'Roboto Mono', monospace;
				text-align: center;
			}

			.time-display h1 {
				font-size: 16rem;
				margin: 0;
				font-variant-numeric: tabular-nums;
			}

			.time-display .target-time {
				font-size: 2rem;
				color: rgb(255, 176, 131);
				margin-top: 1rem;
			}

			.nav-controls {
				display: flex;
				gap: 10px;
				align-items: center;
			}

			#countdownMinutes {
				width: 80px;
				background: #222;
				border: 2px solid rgb(255, 176, 131);
				color: white;
				padding: 5px;
				border-radius: 5px;
				font-family: "Space Grotesk", serif;
			}
		</style>
		<script src="https://www.desmos.com/api/v1.10/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://www.desmos.com/api/v1.10/3d.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://www.desmos.com/api/v1.10/scientific.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://www.desmos.com/api/v1.10/fourfunction.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
		<script src="https://unpkg.com/easydraw-package/dist/easydraw.browser.js"></script>
	</head>
	<body>
		<div id="navBar">
			<select onchange="NewTool();" id="WhatToolDoYouWantToUse">
				<option>White Bord</option>
				<option>Timer Tools</option>
				<option>Calculator</option>
				<option>Visualizer</option>
			</select>

			<p>&nbsp;&nbsp; &nbsp;&nbsp;</p>
			<div id="options"></div>
			<div class="tooltip info-icon">
					â„¹
					<span class="tooltiptext"
						>Created by ATB for educational purposes. A collection of
						useful tools for students and teachers.</span
					>
				</div>
			<a
				href="https://github.com/yourusername/repo"
				target="_blank"
				class="tooltip github-icon"
			>
				<?xml version="1.0" encoding="UTF-8"?>
				<!-- Generator: Adobe Illustrator 26.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
				<svg
					xmlns="http://www.w3.org/2000/svg"
					xmlns:xlink="http://www.w3.org/1999/xlink"
					version="1.1"
					id="Capa_1"
					x="0px"
					y="0px"
					viewBox="0 0 24 24"
					style="enable-background: new 0 0 24 24"
					xml:space="preserve"
					width="512"
					height="512"
				>
					<g>
						<path
							style="fill-rule: evenodd; clip-rule: evenodd"
							d="M12,0.296c-6.627,0-12,5.372-12,12c0,5.302,3.438,9.8,8.206,11.387   c0.6,0.111,0.82-0.26,0.82-0.577c0-0.286-0.011-1.231-0.016-2.234c-3.338,0.726-4.043-1.416-4.043-1.416   C4.421,18.069,3.635,17.7,3.635,17.7c-1.089-0.745,0.082-0.729,0.082-0.729c1.205,0.085,1.839,1.237,1.839,1.237   c1.07,1.834,2.807,1.304,3.492,0.997C9.156,18.429,9.467,17.9,9.81,17.6c-2.665-0.303-5.467-1.332-5.467-5.93   c0-1.31,0.469-2.381,1.237-3.221C5.455,8.146,5.044,6.926,5.696,5.273c0,0,1.008-0.322,3.301,1.23   C9.954,6.237,10.98,6.104,12,6.099c1.02,0.005,2.047,0.138,3.006,0.404c2.29-1.553,3.297-1.23,3.297-1.23   c0.653,1.653,0.242,2.873,0.118,3.176c0.769,0.84,1.235,1.911,1.235,3.221c0,4.609-2.807,5.624-5.479,5.921   c0.43,0.372,0.814,1.103,0.814,2.222c0,1.606-0.014,2.898-0.014,3.293c0,0.319,0.216,0.694,0.824,0.576   c4.766-1.589,8.2-6.085,8.2-11.385C24,5.669,18.627,0.296,12,0.296z"
						/>
						<path
							d="M4.545,17.526c-0.026,0.06-0.12,0.078-0.206,0.037c-0.087-0.039-0.136-0.121-0.108-0.18   c0.026-0.061,0.12-0.078,0.207-0.037C4.525,17.384,4.575,17.466,4.545,17.526L4.545,17.526z"
						/>
						<path
							d="M5.031,18.068c-0.057,0.053-0.169,0.028-0.245-0.055c-0.079-0.084-0.093-0.196-0.035-0.249   c0.059-0.053,0.167-0.028,0.246,0.056C5.076,17.903,5.091,18.014,5.031,18.068L5.031,18.068z"
						/>
						<path
							d="M5.504,18.759c-0.074,0.051-0.194,0.003-0.268-0.103c-0.074-0.107-0.074-0.235,0.002-0.286   c0.074-0.051,0.193-0.005,0.268,0.101C5.579,18.579,5.579,18.707,5.504,18.759L5.504,18.759z"
						/>
						<path
							d="M6.152,19.427c-0.066,0.073-0.206,0.053-0.308-0.046c-0.105-0.097-0.134-0.234-0.068-0.307   c0.067-0.073,0.208-0.052,0.311,0.046C6.191,19.217,6.222,19.355,6.152,19.427L6.152,19.427z"
						/>
						<path
							d="M7.047,19.814c-0.029,0.094-0.164,0.137-0.3,0.097C6.611,19.87,6.522,19.76,6.55,19.665   c0.028-0.095,0.164-0.139,0.301-0.096C6.986,19.609,7.075,19.719,7.047,19.814L7.047,19.814z"
						/>
						<path
							d="M8.029,19.886c0.003,0.099-0.112,0.181-0.255,0.183c-0.143,0.003-0.26-0.077-0.261-0.174c0-0.1,0.113-0.181,0.256-0.184   C7.912,19.708,8.029,19.788,8.029,19.886L8.029,19.886z"
						/>
						<path
							d="M8.943,19.731c0.017,0.096-0.082,0.196-0.224,0.222c-0.139,0.026-0.268-0.034-0.286-0.13   c-0.017-0.099,0.084-0.198,0.223-0.224C8.797,19.574,8.925,19.632,8.943,19.731L8.943,19.731z"
						/>
					</g>
				</svg>

				<span class="tooltiptext">Collaborate on GitHub!</span>
			</a>
		</div>
		<hr />
		<div class="progress-bar"><div class="progress-bar-fill"></div></div>
		<div id="root"></div>
		<script>
			var whattool = document.getElementById("WhatToolDoYouWantToUse");
			var options = document.getElementById("options");
			var root = document.getElementById("root");
			var ModeCurrunt;
			const backgrounds = {
				Blank: "",
				"World Map":
					"https://cloud-j5gnh7ftf-hack-club-bot.vercel.app/0image.png",
				"Political Map Of India":
					"https://cloud-nvulyyvhh-hack-club-bot.vercel.app/0image.png",
				"Outline Map Of India":
					"https://cloud-f745p5pob-hack-club-bot.vercel.app/0image.png",
			};

			let stopwatchInterval;
			let stopwatchTime = 0;
			let countdownInterval;

			function formatTime(ms) {
				const hrs = Math.floor(ms / 3600000);
				const mins = Math.floor((ms % 3600000) / 60000);
				const secs = Math.floor((ms % 60000) / 1000);
				return `${hrs.toString().padStart(2, "0")}:${mins
					.toString()
					.padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
			}

			function UpdateDateANdTime() {
				const date = new Date();
				const time = date.toLocaleTimeString('en-US', { 
					hour12: false,
					hour: '2-digit',
					minute: '2-digit',
					second: '2-digit'
				});
				root.innerHTML = `
					<h2>${date.toDateString()}</h2>
					<h1>${time}</h1>
				`;
			}

			function updateGraphType() {
				const graphType = document.getElementById("graphOptions").value;
				root.innerHTML = '<div id="calculator"></div>';
				const elt = document.getElementById("calculator");

				switch (graphType) {
					case "2D Graph":
						return Desmos.GraphingCalculator(elt);
					case "3D Graph":
						return Desmos.Calculator3D(elt);
					case "Scientific":
						return Desmos.ScientificCalculator(elt);
					case "Four Function":
						return Desmos.FourFunctionCalculator(elt);
				}
			}

			function updateTimeOptions() {
				root.className = "BodyTimeMode";
				options.innerHTML = `
					<div class="nav-controls">
						<select onchange="switchTimeMode(this.value);" id="timeOptions">
							<option>Clock</option>
							<option>Stopwatch</option>
							<option>Countdown</option>
						</select>
						<div id="extraControls"></div>
					</div>
				`;
				switchTimeMode("Clock");
			}

			function switchTimeMode(mode) {
				clearInterval(ModeCurrunt);
				clearInterval(stopwatchInterval);
				clearInterval(countdownInterval);
				const extraControls = document.getElementById('extraControls');

				switch (mode) {
					case "Clock":
						extraControls.innerHTML = '';
						root.className = "time-display";
						UpdateDateANdTime();
						ModeCurrunt = setInterval(UpdateDateANdTime, 1000);
						break;
					case "Stopwatch":
						stopwatchTime = 0;
						root.className = "BodyTimeMode";
						root.innerHTML = `
							<h1>00:00:00</h1>
							<div class="timer-controls">
								<button onclick="startStopwatch()" id="startBtn">Start</button>
								<button onclick="stopStopwatch()" id="stopBtn" disabled>Stop</button>
								<button onclick="resetStopwatch()" id="resetBtn">Reset</button>
							</div>
						`;
						break;
					case "Countdown":
						extraControls.innerHTML = `
							<input type="number" id="countdownMinutes" placeholder="Min" min="1">
							<button onclick="startCountdown()" class="timer-controls">Start</button>
						`;
						root.className = "time-display";
						root.innerHTML = `
							<h1>00:00:00</h1>
							<div class="target-time"></div>
						`;
						break;
				}
			}

			// Stopwatch functions
			function startStopwatch() {
				if (!stopwatchInterval) {
					const startTime = Date.now() - stopwatchTime;
					stopwatchInterval = setInterval(() => {
						stopwatchTime = Date.now() - startTime;
						root.querySelector("h1").textContent =
							formatTime(stopwatchTime);
					}, 10); // Update more frequently for smoother display

					document.getElementById("startBtn").disabled = true;
					document.getElementById("stopBtn").disabled = false;
					document.getElementById("resetBtn").disabled = true;
				}
			}

			function stopStopwatch() {
				clearInterval(stopwatchInterval);
				stopwatchInterval = null;
				document.getElementById("startBtn").disabled = false;
				document.getElementById("stopBtn").disabled = true;
				document.getElementById("resetBtn").disabled = false;
			}

			function resetStopwatch() {
				stopStopwatch();
				stopwatchTime = 0;
				root.querySelector("h1").textContent = "00:00:00";
				document.getElementById("startBtn").disabled = false;
				document.getElementById("stopBtn").disabled = true;
				document.getElementById("resetBtn").disabled = false;
			}

			// Countdown functions
			function startCountdown() {
				const minutes = parseInt(document.getElementById("countdownMinutes").value);
				if (!minutes || minutes <= 0) {
					root.querySelector("h1").textContent = "00:00:00";
					return;
				}

				const targetDate = new Date(Date.now() + minutes * 60000);
				const totalTime = minutes * 60000;

				function updateCountdown() {
					const now = Date.now();
					const distance = targetDate - now;

					if (distance < 0) {
						stopCountdown();
						root.querySelector("h1").textContent = "TIME UP";
						root.querySelector(".target-time").textContent = "";
						document.querySelector(".progress-bar-fill").style.width = "0%";
						return;
					}

					const timeLeft = formatTime(distance);
					root.querySelector("h1").textContent = timeLeft;
					root.querySelector(".target-time").textContent = 
						`Until ${targetDate.toLocaleTimeString('en-US', { 
							hour12: false,
							hour: '2-digit',
							minute: '2-digit'
						})}`;

					const percentage = ((totalTime - distance) / totalTime) * 100;
					document.querySelector(".progress-bar-fill").style.width = `${percentage}%`;
				}

				updateCountdown();
				countdownInterval = setInterval(updateCountdown, 1000);
			}

			function stopCountdown() {
				clearInterval(countdownInterval);
			}

			function NewTool() {
				clearInterval(ModeCurrunt);
				clearInterval(stopwatchInterval);
				clearInterval(countdownInterval);

				switch (whattool.value) {
					case "White Bord":
						options.innerHTML = `
						Background:
							<select onchange="displayCanvas('#root', backgrounds[document.getElementById('WhiteBordOptions').value]);" id="WhiteBordOptions">
								<option>Blank</option>
								<option>Political Map Of India</option>
								<option>Outline Map Of India</option>
								<option>World Map</option>
							</select>
						`;
						displayCanvas(
							"#root",
							backgrounds[
								document.getElementById("WhiteBordOptions")
									.value
							]
						);
						break;

					case "Timer Tools":
						updateTimeOptions();
						break;

					case "Calculator":
						options.innerHTML = `
						<select onchange="updateCalculator();" id="calcOptions">
							<option>Scientific</option>
							<option>Four Function</option>
						</select>
					`;
						updateCalculator();
						break;

					case "Visualizer":
						options.innerHTML = `
							<select onchange="updateGraphType();" id="graphOptions">
								<option>2D Graph</option>
								<option>3D Graph</option>
							</select>
						`;
						updateGraphType();
						break;
				}
			}

			function updateCalculator() {
				root.innerHTML = '<div id="calculator"></div>';
				const elt = document.getElementById("calculator");
				const type = document.getElementById("calcOptions").value;

				if (type === "Scientific") {
					return Desmos.ScientificCalculator(elt);
				} else {
					return Desmos.FourFunctionCalculator(elt);
				}
			}

			NewTool();
		</script>
	</body>
</html>
